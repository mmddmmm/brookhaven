local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local player = Players.LocalPlayer
local isMobile = UserInputService.TouchEnabled

-- GUI ÿßÿµŸÑ€å
local mainGui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
mainGui.Name = "MainGui"
mainGui.ResetOnSpawn = false

-- ŸÑŸàÿØ€åŸÜ⁄Ø
local loadingFrame = Instance.new("Frame", mainGui)
loadingFrame.Size = UDim2.new(0, 420, 0, 180)
loadingFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
loadingFrame.AnchorPoint = Vector2.new(0.5, 0.5)
loadingFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
loadingFrame.BackgroundTransparency = 0.2
Instance.new("UICorner", loadingFrame).CornerRadius = UDim.new(0, 12)

local stroke = Instance.new("UIStroke", loadingFrame)
stroke.Thickness = 3
stroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

task.spawn(function()
	while loadingFrame and loadingFrame.Parent do
		for i = 0, 255, 5 do
			stroke.Color = Color3.fromRGB(i, 255 - i, 255)
			task.wait(0.02)
		end
	end
end)

local title = Instance.new("TextLabel", loadingFrame)
title.Size = UDim2.new(1, 0, 0, 50)
title.Position = UDim2.new(0, 0, 0, 10)
title.Text = "üöÄ ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿ±ÿßÿ®ÿ∑ ⁄©ÿßÿ±ÿ®ÿ±€å..."
title.TextColor3 = Color3.new(1, 1, 1)
title.Font = Enum.Font.GothamBold
title.TextSize = 22
title.BackgroundTransparency = 1

local progress = Instance.new("Frame", loadingFrame)
progress.Size = UDim2.new(0.9, 0, 0.15, 0)
progress.Position = UDim2.new(0.05, 0, 0.85, 0)
progress.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
Instance.new("UICorner", progress).CornerRadius = UDim.new(0, 8)

local fill = Instance.new("Frame", progress)
fill.Size = UDim2.new(0, 0, 1, 0)
fill.BackgroundColor3 = Color3.fromRGB(0, 255, 100)
Instance.new("UICorner", fill).CornerRadius = UDim.new(0, 8)

TweenService:Create(fill, TweenInfo.new(2.5), {Size = UDim2.new(1, 0, 1, 0)}):Play()

-- ÿ®ÿπÿØ ÿßÿ≤ ŸÑŸàÿØ€åŸÜ⁄Ø
task.delay(3, function()
	TweenService:Create(loadingFrame, TweenInfo.new(0.6), {BackgroundTransparency = 1}):Play()
	task.wait(0.6)
	loadingFrame:Destroy()

	-- ŸÜŸàÿßÿ± Ÿæÿß€å€åŸÜ ÿ¨ÿØÿß⁄ØÿßŸÜŸá
	local bottomBarGui = Instance.new("ScreenGui", player.PlayerGui)
	bottomBarGui.Name = "BottomBar"
	bottomBarGui.ResetOnSpawn = false

	local bottomBar = Instance.new("Frame", bottomBarGui)
	bottomBar.Size = UDim2.new(0, 500, 0, 80)
	bottomBar.Position = UDim2.new(0.5, -250, 1, -90)
	bottomBar.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
	Instance.new("UICorner", bottomBar).CornerRadius = UDim.new(0, 12)

	local avatarBtn = Instance.new("ImageButton", bottomBar)
	avatarBtn.Size = UDim2.new(0, 60, 0, 60)
	avatarBtn.Position = UDim2.new(0, 20, 0.5, -30)
	avatarBtn.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	avatarBtn.Image = Players:GetUserThumbnailAsync(player.UserId, Enum.ThumbnailType.HeadShot, Enum.ThumbnailSize.Size60x60)
	Instance.new("UICorner", avatarBtn).CornerRadius = UDim.new(1, 0)

	local realBtn = Instance.new("TextButton", bottomBar)
	realBtn.Size = UDim2.new(0, 140, 0, 60)
	realBtn.Position = UDim2.new(0, 100, 0.5, -30)
	realBtn.Text = "üß© Real GUI"
	realBtn.Font = Enum.Font.GothamBold
	realBtn.TextSize = 20
	realBtn.TextColor3 = Color3.new(1, 1, 1)
	realBtn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
	Instance.new("UICorner", realBtn).CornerRadius = UDim.new(0, 10)

	local function createRealGui()
		local realGui = Instance.new("ScreenGui", player.PlayerGui)
		realGui.Name = "RealGui"
		realGui.ResetOnSpawn = false

		local frameSize = isMobile and UDim2.new(0, 220, 0, 200) or UDim2.new(0, 320, 0, 260)
		local framePos = isMobile and UDim2.new(0.5, -110, 1, -10) or UDim2.new(0.5, -160, 0.5, -130)
		local anchor = isMobile and Vector2.new(0.5, 1) or Vector2.new(0.5, 0.5)

		local frame = Instance.new("Frame", realGui)
		frame.Size = frameSize
        frame.Position = framePos
		frame.AnchorPoint = anchor
		frame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
		frame.BackgroundTransparency = 0.1
		frame.Active = true
		frame.Draggable = true
		Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 12)
		Instance.new("UIStroke", frame).Color = Color3.fromRGB(255, 0, 255)

		-- üëá ÿπŸÜŸàÿßŸÜ Real GUI
		local titleLabel = Instance.new("TextLabel", frame)
		titleLabel.Size = UDim2.new(1, -20, 0, 40)
		titleLabel.Position = UDim2.new(0, 10, 0, 5)
		titleLabel.Text = "üß© Real GUI"
		titleLabel.Font = Enum.Font.GothamBold
		titleLabel.TextSize = 22
		titleLabel.TextColor3 = Color3.new(1, 1, 1)
		titleLabel.BackgroundTransparency = 1
		titleLabel.TextXAlignment = Enum.TextXAlignment.Left

		if isMobile then
			frame:TweenPosition(UDim2.new(0.5, -110, 0.7, 0), "Out", "Quad", 0.5, true)
		end

		local closeBtn = Instance.new("TextButton", frame)
		closeBtn.Size = UDim2.new(0, 30, 0, 30)
		closeBtn.Position = UDim2.new(1, -35, 0, 5)
		closeBtn.Text = "√ó"
		closeBtn.Font = Enum.Font.GothamBold
		closeBtn.TextSize = 20
		closeBtn.TextColor3 = Color3.new(1, 1, 1)
		closeBtn.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
		Instance.new("UICorner", closeBtn).CornerRadius = UDim.new(0, 6)

		closeBtn.MouseButton1Click:Connect(function()
			realGui:Destroy()
		end)

		local minimizeBtn = Instance.new("TextButton", frame)
		minimizeBtn.Size = UDim2.new(0, 30, 0, 30)
		minimizeBtn.Position = UDim2.new(1, -70, 0, 5)
		minimizeBtn.Text = "‚Üî"
		minimizeBtn.Font = Enum.Font.GothamBold
		minimizeBtn.TextSize = 20
		minimizeBtn.TextColor3 = Color3.new(1, 1, 1)
		minimizeBtn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
		Instance.new("UICorner", minimizeBtn).CornerRadius = UDim.new(0, 6)

		local originalSize = frame.Size
		local isMinimized = false
		local buttons = {}

		local function createButton(name, yPos, url)
			local btn = Instance.new("TextButton", frame)
			btn.Size = UDim2.new(0, frame.Size.X.Offset - 40, 0, 40)
			btn.Position = UDim2.new(0, 20, 0, yPos)
			btn.Text = name
			btn.Font = Enum.Font.GothamBold
			btn.TextSize = isMobile and 16 or 18
			btn.TextColor3 = Color3.new(1, 1, 1)
			btn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
			btn.BackgroundTransparency = 0.3
			Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 10)

			btn.MouseButton1Click:Connect(function()
				loadstring(game:HttpGet(url))()
			end)

			table.insert(buttons, btn)
		end

		createButton("Fly", 60, "https://raw.githubusercontent.com/mmddmmm/brookhaven/refs/heads/main/Realgui/fly.txt")
		createButton("TP Tools", 110, "https://raw.githubusercontent.com/mmddmmm/brookhaven/refs/heads/main/Realgui/tp%20tools.txt")
		createButton("Admin Panel", 160, "https://raw.githubusercontent.com/mmddmmm/brookhaven/refs/heads/main/Realgui/adminpanel.txt")

		-- ÿπŸÖŸÑ⁄©ÿ±ÿØ ÿØ⁄©ŸÖŸá ŸÜÿµŸÅŸá ÿ®ÿ≥ÿ™ŸÜ
		minimizeBtn.MouseButton1Click:Connect(function()
			if not isMinimized then
				frame:TweenSize(UDim2.new(originalSize.X.Scale, originalSize.X.Offset, 0, 50), "Out", "Quad", 0.3, true)
				for _, btn in pairs(buttons) do
					btn.Visible = false
				end
				isMinimized = true
			else
				frame:TweenSize(originalSize, "Out", "Quad", 0.3, true)
				for _, btn in pairs(buttons) do
					btn.Visible = true
				end
				isMinimized = false
			end
		end)
	end

	-- ÿßÿ™ÿµÿßŸÑ ÿØ⁄©ŸÖŸá Real GUI
	realBtn.MouseButton1Click:Connect(function()
		for _, gui in pairs(player.PlayerGui:GetChildren()) do
			if gui:IsA("ScreenGui") and gui.Name == "RealGui" then
				gui:Destroy()
			end
		end
		createRealGui()
	end)

	-- ÿØÿ≥ÿ™Ÿàÿ± ⁄Üÿ™ ÿ®ÿ±ÿß€å ÿ®ÿ≥ÿ™ŸÜ ⁄©ÿßŸÖŸÑ ÿ±ÿßÿ®ÿ∑ ⁄©ÿßÿ±ÿ®ÿ±€å
	player.Chatted:Connect(function(msg)
		if msg:lower() == "/closegui" then
			for _, gui in pairs(player.PlayerGui:GetChildren()) do
				if gui:IsA("ScreenGui") and (
					gui.Name == "MainGui" or
					gui.Name == "BottomBar" or
					gui.Name == "RealGui"
			 ) then
					gui:Destroy()
				end
			end
		end
	end)
end)
